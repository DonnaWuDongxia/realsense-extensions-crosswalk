// Copyright 2015 Intel Corporation. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

#ifndef REALSENSE_ENHANCED_PHOTOGRAPHY_WIN_COMMON_UTILS_H_
#define REALSENSE_ENHANCED_PHOTOGRAPHY_WIN_COMMON_UTILS_H_

#include <string>

#include "base/memory/scoped_ptr.h"
#include "base/values.h"
// This file is auto-generated by depth_photo.idl
#include "depth_photo.h" // NOLINT
#include "realsense/enhanced_photography/win/enhanced_photography_instance.h"
#include "third_party/libpxc/include/pxcphoto.h"

namespace realsense {
namespace enhanced_photography {

enum ErrorCode {
  STATUS_FEATURE_UNSUPPORTED = 1,  // which maps to 'feature-unsupported'
                                   // error code in js side.
  STATUS_PARAM_UNSUPPORTED,        // which maps to 'param-unsupported'
                                   // error code in js side.
  STATUS_PHOTO_INVALID,            // which maps to 'invalid-photo'
                                   // error code in js side.
  STATUS_EXEC_FAILED               // which maps to 'exec-failed'
                                   // error code in js side.
};

bool CopyImageToBinaryMessage(PXCImage* image,
                              scoped_ptr<uint8[]>& binary_message,  // NOLINT
                              size_t* length);
void CreateDepthPhotoObject(EnhancedPhotographyInstance* instance,
                            PXCPhoto* pxcphoto,
                            jsapi::depth_photo::Photo* photo);
scoped_ptr<base::ListValue> CreateStringErrorResult(const std::string& error);
scoped_ptr<base::ListValue> CreateErrorResult(ErrorCode error);
scoped_ptr<base::ListValue> CreateSuccessResult();
void GetBinaryValueFromArgs(base::ListValue* args, base::BinaryValue** value);

}  // namespace enhanced_photography
}  // namespace realsense

#endif  // REALSENSE_ENHANCED_PHOTOGRAPHY_WIN_COMMON_UTILS_H_
